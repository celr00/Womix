"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[972],{8972:(J,p,u)=>{u.r(p),u.d(p,{AccountProductDetailModule:()=>F});var l=u(6895),s=u(2559),r=u(433),t=u(1571),m=u(5528),h=u(8909),g=u(7185),v=u(4015),b=u(2699);function x(e,c){if(1&e&&(t.TgZ(0,"option",21),t.ALo(1,"number"),t._uU(2),t.qZA()),2&e){const o=c.$implicit;t.s9C("value",t.lcZ(1,2,o.id)),t.xp6(2),t.hij(" ",o.name," ")}}function y(e,c){if(1&e&&(t.TgZ(0,"div",17)(1,"select",18),t.YNc(2,x,3,4,"option",19),t.qZA(),t.TgZ(3,"label",20),t._uU(4,"Product type"),t.qZA()()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("formControl",o.productForm.controls.productItemClass.get("itemClassId")),t.xp6(1),t.Q6J("ngForOf",o.types)}}function Z(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"form",9),t.NdJ("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit())}),t._UZ(1,"app-text-input",10)(2,"app-text-input",10),t.TgZ(3,"div",4)(4,"div",11),t._UZ(5,"app-text-input",12),t.qZA(),t.TgZ(6,"div",11),t._UZ(7,"app-text-input",12),t.qZA()(),t.YNc(8,y,5,2,"div",13),t.TgZ(9,"div",4)(10,"div",14)(11,"button",15),t._uU(12,"Confirm changes "),t._UZ(13,"i",16),t.qZA()()()()}if(2&e){const o=t.oxw();t.Q6J("formGroup",o.productForm),t.xp6(1),t.Q6J("label","Name")("formControl",o.productForm.controls.name),t.xp6(1),t.Q6J("label","Description")("formControl",o.productForm.controls.description),t.xp6(3),t.Q6J("label","Price")("type","number")("formControl",o.productForm.controls.price),t.xp6(2),t.Q6J("label","Quantity")("type","number")("formControl",o.productForm.controls.stockQuantity),t.xp6(1),t.Q6J("ngIf",o.productForm.get("productItemClass")),t.xp6(3),t.Q6J("disabled",o.productForm.invalid||!o.productForm.dirty)}}let A=(()=>{class e{constructor(o,i,n,d,a,S){this.productService=o,this.fb=i,this.route=n,this.bcService=d,this.toastr=a,this.router=S,this.productForm=new r.cw({}),this.types=[],this.product={},this.photos=[],this.id=Number(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.loadTypes()}loadProduct(){this.productService.getProduct(this.id).subscribe({next:o=>{this.product=o,this.bcService.set("@productName",o.name),this.bcService.set("@editTitle","Edit "+o.name),this.initForm(this.product),this.product.productPhotos.forEach(i=>{this.photos.push(i.photo)})}})}loadTypes(){this.productService.getTypes().subscribe({next:o=>{this.types=o},complete:()=>{this.loadProduct()}})}onSubmit(){this.productService.edit(this.productForm.value).subscribe({next:()=>{this.toastr.success("Product updated successfully"),this.router.navigateByUrl("/account/products/list/"+this.product.id)},error:()=>{}})}initForm(o){this.productForm=this.fb.group({id:[""],name:["",[r.kI.required,r.kI.minLength(10),r.kI.maxLength(100)]],description:["",[r.kI.required,r.kI.minLength(10),r.kI.maxLength(100)]],price:["",[r.kI.required]],stockQuantity:["",[r.kI.required]],productItemClass:this.fb.group({itemClassId:[o.productItemClass.itemClassId,[r.kI.required]]})}),this.productForm.patchValue(this.product)}receive(o){this.product=o}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.M),t.Y36(r.qu),t.Y36(s.gz),t.Y36(h.pm),t.Y36(g._W),t.Y36(s.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account-product-edit"]],decls:10,vars:5,consts:[[1,"container-fluid","container-md"],[1,"mb-4"],[1,"text-decoration-none",3,"routerLink"],[1,"fa","fa-angle-left","me-2"],[1,"row"],[1,"col-12","col-sm-10","col-md-6","col-lg-4"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"col-12","col-md-6","col-lg-8"],[3,"object","photos","controller","send"],[3,"formGroup","ngSubmit"],[3,"label","formControl"],[1,"col-6"],[3,"label","type","formControl"],["class","form-floating","id","floatingSelect",4,"ngIf"],[1,"col","d-flex"],["type","submit",1,"btn","btn-success","my-3",3,"disabled"],[1,"fa","fa-floppy-o","ms-2"],["id","floatingSelect",1,"form-floating"],[1,"form-select",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[3,"value"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"i",3),t._uU(4," Back "),t.qZA()(),t.TgZ(5,"div",4)(6,"div",5),t.YNc(7,Z,14,13,"form",6),t.qZA(),t.TgZ(8,"div",7)(9,"app-photo-upload",8),t.NdJ("send",function(d){return i.receive(d)}),t.qZA()()()()),2&o&&(t.xp6(2),t.MGl("routerLink","/account/products/list/",i.product.id,""),t.xp6(5),t.Q6J("ngIf",i.types&&i.productForm),t.xp6(2),t.Q6J("object",i.product)("photos",i.photos)("controller","products"))},dependencies:[l.sg,l.O5,v.t,r._Y,r.YN,r.Kr,r.EJ,r.JJ,r.JL,r.oH,r.sg,b.N,s.rH,l.JJ]}),e})();var f=u(9105);function C(e,c){if(1&e&&(t.TgZ(0,"div",17),t._UZ(1,"ngx-gallery",18),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("options",o.galleryOptions)("images",o.galleryImages)}}function P(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7," Back "),t.qZA()(),t.TgZ(8,"h1"),t._uU(9),t.qZA(),t.TgZ(10,"p",7),t._uU(11),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p",8),t._uU(15),t.ALo(16,"currency"),t.qZA()(),t.TgZ(17,"div",9),t.YNc(18,C,2,2,"div",10),t.qZA()(),t.TgZ(19,"div",11)(20,"div",12)(21,"a",13),t._UZ(22,"i",14),t._uU(23," Edit"),t.qZA(),t.TgZ(24,"button",15),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.delete())}),t._UZ(25,"i",16),t._uU(26," Delete"),t.qZA()()()()()}if(2&e){const o=t.oxw();t.xp6(9),t.hij(" ",o.product.name," "),t.xp6(2),t.hij(" ",o.product.productItemClass.itemClass.name," product category "),t.xp6(2),t.hij(" ",o.product.description," "),t.xp6(2),t.hij(" ",t.lcZ(16,5,o.product.price)," "),t.xp6(3),t.Q6J("ngIf",o.showGallery())}}const T=[{path:"",component:(()=>{class e{constructor(o,i,n,d,a){this.route=o,this.bcService=i,this.productService=n,this.router=d,this.toastr=a,this.product={},this.galleryOptions=[],this.galleryImages=[],this.id=Number(this.route.snapshot.paramMap.get("id")),this.galleryOptions=[{imagePercent:100,thumbnailsColumns:4,imageAnimation:f.zw.Slide,preview:!0,imageSwipe:!0,thumbnailsSwipe:!0,previewCloseOnClick:!0,previewCloseOnEsc:!0,thumbnailMargin:0,thumbnailsMargin:0,previewKeyboardNavigation:!0}]}ngOnInit(){this.loadProduct()}loadProduct(){this.productService.getProduct(this.id).subscribe({next:o=>{this.product=o,this.bcService.set("@productName",o.name),this.galleryImages=this.defineGalleryImages()}})}delete(){this.productService.delete(this.id).subscribe({next:()=>{this.router.navigateByUrl("/account/products/list"),this.toastr.success("Product deleted successfully")},error:()=>{}})}defineGalleryImages(){if(0===this.product.productPhotos.length)return[];const o=[],i=[];this.product.productPhotos.forEach(n=>{i.push(n.photo)});for(const n of i)o.push({small:n.url,medium:n.url,big:n.url});return o}showGallery(){return this.galleryImages.length>0}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.gz),t.Y36(h.pm),t.Y36(m.M),t.Y36(s.F0),t.Y36(g._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account-product-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","container-md"],[1,"row","mb-3"],[1,"col-12","col-lg-6","col-xl-7","mb-3"],[1,"mb-4"],["routerLink","/account/products/list",1,"text-decoration-none"],[1,"fa","fa-angle-left","me-2"],[1,"fst-italic","text-muted"],[1,"fw-bold","fs-5","text-success"],[1,"col-12","col-lg-6","col-xl-5"],["class","gallery-viewer",4,"ngIf"],[1,"row"],[1,"col","d-flex","justify-content-end"],["routerLink","edit",1,"btn","btn-outline-info","me-2"],[1,"fa","fa-pencil","me-2"],[1,"btn","btn-outline-danger","me-2",3,"click"],[1,"fa","fa-trash","me-2"],[1,"gallery-viewer"],[1,"ngx-gallery",3,"options","images"]],template:function(o,i){1&o&&t.YNc(0,P,27,7,"div",0),2&o&&t.Q6J("ngIf",i.product)},dependencies:[l.O5,f.g$,s.rH,l.H9]}),e})()},{path:"edit",component:A,data:{breadcrumb:{alias:"editTitle"}}}];let I=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(T),s.Bz]}),e})();var _=u(4466);let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,_.m,I]}),e})()}}]);