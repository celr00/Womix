"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[427],{9427:(z,p,r)=>{r.r(p),r.d(p,{ItemModule:()=>N});var c=r(6895),s=r(2559),j=r(9646),d=r(435),t=r(1571),u=r(2262);let x=(()=>{class e{constructor(o){this.confirmService=o,this.modal=new d.u,this.modal.title="Trabajo editado",this.modal.message="Si contin\xfaa perder\xe1 los cambios no guardados para este trabajo."}canDeactivate(o){return o.jobForm?.dirty?this.confirmService.confirm(this.modal):(0,j.of)(!0)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u.z))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var n=r(433),h=r(7573),v=r(8909),g=r(7185),I=r(4015),C=r(4217);function F(e,i){if(1&e&&(t.TgZ(0,"option",19),t.ALo(1,"number"),t._uU(2),t.qZA()),2&e){const o=i.$implicit;t.s9C("value",t.lcZ(1,2,o.id)),t.xp6(2),t.hij(" ",o.name," ")}}function J(e,i){if(1&e&&(t.TgZ(0,"div",15)(1,"select",16),t.YNc(2,F,3,4,"option",17),t.qZA(),t.TgZ(3,"label",18),t._uU(4,"Job area"),t.qZA()()),2&e){const o=t.oxw(3);t.xp6(1),t.Q6J("formControl",o.jobForm.controls.jobArea.get("areaId")),t.xp6(1),t.Q6J("ngForOf",o.areas)}}function Z(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(o);const m=t.oxw(2);return t.KtG(m.onSubmit())}),t._UZ(1,"app-text-input",9)(2,"app-text-area",9)(3,"app-text-input",10),t.YNc(4,J,5,2,"div",11),t.TgZ(5,"div",5)(6,"div",12)(7,"button",13),t._uU(8,"Confirm changes "),t._UZ(9,"i",14),t.qZA()()()()}if(2&e){const o=t.oxw(2);t.Q6J("formGroup",o.jobForm),t.xp6(1),t.Q6J("label","Name")("formControl",o.jobForm.controls.name),t.xp6(1),t.Q6J("label","Description")("formControl",o.jobForm.controls.description),t.xp6(1),t.Q6J("label","Salary")("type","number")("formControl",o.jobForm.controls.salary),t.xp6(1),t.Q6J("ngIf",o.jobForm.get("jobArea")),t.xp6(3),t.Q6J("disabled",o.jobForm.invalid||!o.jobForm.dirty)}}function S(e,i){if(1&e&&(t.TgZ(0,"div",1)(1,"div",2)(2,"a",3),t._UZ(3,"i",4),t._uU(4," Back "),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6),t.YNc(7,Z,10,10,"form",7),t.qZA()()()),2&e){const o=t.oxw();t.xp6(2),t.MGl("routerLink","/account/jobs/list/",o.job.id,""),t.xp6(5),t.Q6J("ngIf",o.areas&&o.jobForm)}}let T=(()=>{class e{unloadNotification(o){this.jobForm?.dirty&&(o.returnValue=!0)}constructor(o,a,m,l,f,b,Q){this.jobService=o,this.fb=a,this.route=m,this.bcService=l,this.toastr=f,this.router=b,this.confirmService=Q,this.jobForm=new n.cw({}),this.job={},this.photos=[],this.modal=new d.u,this.id=Number(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.loadAreas()}loadJob(){this.jobService.getById(this.id).subscribe({next:o=>{this.job=o,this.bcService.set("@jobItemComponentBreadcrumbTitle",o.name),this.bcService.set("@jobEditItemBreadCrumbTitle","Edit "+o.name),this.initForm(this.job),this.modal.title=`Trabajo ${this.job.name}`,this.modal.message=`\xbfConfirma los cambios realizados en: '${this.job.name}'?`}})}loadAreas(){this.jobService.getAreas().subscribe({next:o=>{this.areas=o},complete:()=>{this.loadJob()}})}onSubmit(){this.modal.title=`Guardar cambios para: ${this.job.name}`,this.modal.message=`\xbfDesea confirmar los cambios realizados a: ${this.job.name}?`;const o=this.jobForm.value;this.confirmService.confirm(this.modal).subscribe({next:a=>{a&&this.jobService.edit(o).subscribe({next:()=>{this.jobForm.reset(o),this.toastr.success("Trabajo actualizado correctamente"),this.router.navigateByUrl("/account/jobs/list/"+this.id)}})}})}initForm(o){this.jobForm=this.fb.group({id:[""],name:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(100)]],description:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(300)]],salary:["",[n.kI.required]],jobArea:this.fb.group({areaId:[o.jobArea.areaId,[n.kI.required]]})}),this.jobForm.patchValue(o)}receive(o){this.job=o}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.e),t.Y36(n.qu),t.Y36(s.gz),t.Y36(v.pm),t.Y36(g._W),t.Y36(s.F0),t.Y36(u.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit"]],hostBindings:function(o,a){1&o&&t.NdJ("beforeunload",function(l){return a.unloadNotification(l)},!1,t.Jf7)},decls:1,vars:1,consts:[["class","container-fluid container-md",4,"ngIf"],[1,"container-fluid","container-md"],[1,"mb-4"],[1,"text-decoration-none",3,"routerLink"],[1,"fa","fa-angle-left","me-2"],[1,"row"],[1,"col-12","col-sm-10","col-md-6","col-lg-4"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"label","formControl"],[3,"label","type","formControl"],["class","form-floating","id","floatingSelect",4,"ngIf"],[1,"col","d-flex"],["type","submit",1,"btn","btn-success","my-3",3,"disabled"],[1,"fa","fa-floppy-o","ms-2"],["id","floatingSelect",1,"form-floating"],[1,"form-select",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[3,"value"]],template:function(o,a){1&o&&t.YNc(0,S,8,2,"div",0),2&o&&t.Q6J("ngIf",a.job&&a.areas)},dependencies:[c.sg,c.O5,s.rH,I.t,n._Y,n.YN,n.Kr,n.EJ,n.JJ,n.JL,n.oH,n.sg,C.U,c.JJ]}),e})();var y=r(1106),A=r(3968);function U(e,i){if(1&e&&(t.TgZ(0,"div",17),t._UZ(1,"app-user-card",18),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Q6J("user",o.user)("compact",!0)}}function Y(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7," Back "),t.qZA()(),t._UZ(8,"app-detail",7),t.TgZ(9,"div",8)(10,"div",9)(11,"a",10),t._UZ(12,"i",11),t._uU(13," Edit"),t.qZA(),t.TgZ(14,"button",12),t.NdJ("click",function(){t.CHM(o);const m=t.oxw();return t.KtG(m.delete())}),t._UZ(15,"i",13),t._uU(16," Delete"),t.qZA()()()(),t.TgZ(17,"div",14)(18,"h4",15),t._uU(19," Interested users "),t.qZA(),t.YNc(20,U,2,2,"div",16),t.qZA()()()()}if(2&e){const o=t.oxw();t.xp6(8),t.Q6J("item",o.job)("fromAccount",!0)("type","job"),t.xp6(12),t.Q6J("ngForOf",o.job.userJobInterests)}}const E=[{path:"",component:(()=>{class e{constructor(o,a,m,l,f,b){this.route=o,this.bcService=a,this.jobService=m,this.router=l,this.toastr=f,this.confirmService=b,this.job={},this.modal=new d.u,this.id=Number(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.loadJob()}loadJob(){this.jobService.getById(this.id).subscribe({next:o=>{this.job=o,this.bcService.set("@jobItemComponentBreadcrumbTitle",o.name)}})}delete(){this.modal.title=`Borrar ${this.job.name}`,this.modal.message=`\xbfConfirma querer eliminar el trabajo: '${this.job.name}'?`,this.modal.btnOkText="Eliminar",this.confirmService.confirm(this.modal).subscribe({next:o=>{o&&this.jobService.delete(this.id).subscribe({next:()=>{this.router.navigateByUrl("/account/jobs/list"),this.toastr.success("Trabajo eliminado correctamente.")}})}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.gz),t.Y36(v.pm),t.Y36(h.e),t.Y36(s.F0),t.Y36(g._W),t.Y36(u.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-item"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","container-md"],[1,"row","mb-3"],[1,"col-12","col-lg-6","col-xl-7","mb-3"],[1,"mb-4"],["routerLink","/account/jobs/list",1,"text-decoration-none"],[1,"fa","fa-angle-left","me-2"],[3,"item","fromAccount","type"],[1,"row","my-4"],[1,"col","d-flex","justify-content-end"],["routerLink","edit",1,"btn","btn-outline-info","me-2"],[1,"fa","fa-pencil","me-2"],[1,"btn","btn-outline-danger","me-2",3,"click"],[1,"fa","fa-trash","me-2"],[1,"col-12","col-lg-6","col-xl-5"],[1,"text-muted","fw-semibold"],["class","",4,"ngFor","ngForOf"],[1,""],[3,"user","compact"]],template:function(o,a){1&o&&t.YNc(0,Y,21,4,"div",0),2&o&&t.Q6J("ngIf",a.job)},dependencies:[c.sg,c.O5,s.rH,y.r,A.J]}),e})()},{path:"edit",component:T,data:{breadcrumb:{alias:"jobEditItemBreadCrumbTitle"}},canDeactivate:[x]}];let _=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(E),s.Bz]}),e})();var B=r(4466);let N=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,_,B.m]}),e})()}}]);