"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[89],{89:(U,u,c)=>{c.r(u),c.d(u,{ItemModule:()=>E});var a=c(6895),l=c(2559),p=c(9105),e=c(1571),v=c(8909),g=c(6325),h=c(7185);function f(i,r){if(1&i&&(e.TgZ(0,"div",18),e._UZ(1,"ngx-gallery",19),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.galleryOptions)("images",t.galleryImages)}}function x(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),e._UZ(6,"i",6),e._uU(7," Back "),e.qZA()(),e.TgZ(8,"h1"),e._uU(9),e.qZA(),e.TgZ(10,"p",7),e._uU(11),e.qZA(),e.TgZ(12,"p",8),e._uU(13),e.qZA(),e.TgZ(14,"p",9),e._uU(15),e.ALo(16,"currency"),e.qZA()(),e.TgZ(17,"div",10),e.YNc(18,f,2,2,"div",11),e.qZA()(),e.TgZ(19,"div",12)(20,"div",13)(21,"a",14),e._UZ(22,"i",15),e._uU(23," Edit"),e.qZA(),e.TgZ(24,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.delete())}),e._UZ(25,"i",17),e._uU(26," Delete"),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(9),e.hij(" ",t.service.name," "),e.xp6(2),e.hij(" ",t.service.serviceCategory.category.name," service category "),e.xp6(2),e.hij(" ",t.service.description," "),e.xp6(2),e.hij(" ",e.lcZ(16,5,t.service.price)," "),e.xp6(3),e.Q6J("ngIf",t.showGallery())}}let b=(()=>{class i{constructor(t,n,s,m,d){this.route=t,this.bcService=n,this.serviceService=s,this.router=m,this.toastr=d,this.service={},this.galleryOptions=[],this.galleryImages=[],this.id=Number(this.route.snapshot.paramMap.get("id")),this.galleryOptions=[{imagePercent:100,thumbnailsColumns:4,imageAnimation:p.zw.Slide,preview:!0,imageSwipe:!0,thumbnailsSwipe:!0,previewCloseOnClick:!0,previewCloseOnEsc:!0,thumbnailMargin:0,thumbnailsMargin:0,previewKeyboardNavigation:!0}]}ngOnInit(){this.loadService()}loadService(){this.serviceService.getById(this.id).subscribe({next:t=>{this.service=t,this.bcService.set("@serviceNameTitle",t.name),this.galleryImages=this.defineGalleryImages()}})}delete(){this.serviceService.delete(this.id).subscribe({next:()=>{this.router.navigateByUrl("/account/services/list"),this.toastr.success("Service deleted successfully")},error:()=>{}})}defineGalleryImages(){if(0===this.service.servicePhotos.length)return[];const t=[],n=[];this.service.servicePhotos.forEach(s=>{n.push(s.photo)});for(const s of n)t.push({small:s.url,medium:s.url,big:s.url});return t}showGallery(){return this.galleryImages.length>0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.gz),e.Y36(v.pm),e.Y36(g.r),e.Y36(l.F0),e.Y36(h._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","container-md"],[1,"row","mb-3"],[1,"col-12","col-lg-6","col-xl-7","mb-3"],[1,"mb-4"],["routerLink","/account/services/list",1,"text-decoration-none"],[1,"fa","fa-angle-left","me-2"],[1,"fst-italic","text-muted"],[1,"fs-5"],[1,"fw-bold","fs-5","text-success"],[1,"col-12","col-lg-6","col-xl-5"],["class","gallery-viewer",4,"ngIf"],[1,"row"],[1,"col","d-flex","justify-content-end"],["routerLink","edit",1,"btn","btn-outline-info","me-2"],[1,"fa","fa-pencil","me-2"],[1,"btn","btn-outline-danger","me-2",3,"click"],[1,"fa","fa-trash","me-2"],[1,"gallery-viewer"],[1,"ngx-gallery",3,"options","images"]],template:function(t,n){1&t&&e.YNc(0,x,27,7,"div",0),2&t&&e.Q6J("ngIf",n.service)},dependencies:[a.O5,l.rH,p.g$,a.H9]}),i})();var o=c(433),y=c(4015),_=c(2699);function C(i,r){if(1&i&&(e.TgZ(0,"option",21),e.ALo(1,"number"),e._uU(2),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",e.lcZ(1,2,t.id)),e.xp6(2),e.hij(" ",t.name," ")}}function I(i,r){if(1&i&&(e.TgZ(0,"div",17)(1,"select",18),e.YNc(2,C,3,4,"option",19),e.qZA(),e.TgZ(3,"label",20),e._uU(4,"Service category"),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("formControl",t.serviceForm.controls.serviceCategory.get("categoryId")),e.xp6(1),e.Q6J("ngForOf",t.categories)}}function Z(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",10),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onSubmit())}),e._UZ(1,"app-text-input",11)(2,"app-text-input",11)(3,"app-text-input",12),e.YNc(4,I,5,2,"div",13),e.TgZ(5,"div",5)(6,"div",14)(7,"button",15),e._uU(8,"Confirm changes "),e._UZ(9,"i",16),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.serviceForm),e.xp6(1),e.Q6J("label","Name")("formControl",t.serviceForm.controls.name),e.xp6(1),e.Q6J("label","Description")("formControl",t.serviceForm.controls.description),e.xp6(1),e.Q6J("label","Price")("type","number")("formControl",t.serviceForm.controls.price),e.xp6(1),e.Q6J("ngIf",t.serviceForm.get("serviceCategory")),e.xp6(3),e.Q6J("disabled",t.serviceForm.invalid||!t.serviceForm.dirty)}}function S(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"a",3),e._UZ(3,"i",4),e._uU(4," Back "),e.qZA()(),e.TgZ(5,"div",5)(6,"div",6),e.YNc(7,Z,10,10,"form",7),e.qZA(),e.TgZ(8,"div",8)(9,"app-photo-upload",9),e.NdJ("send",function(s){e.CHM(t);const m=e.oxw();return e.KtG(m.receive(s))}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.MGl("routerLink","/account/services/list/",t.service.id,""),e.xp6(5),e.Q6J("ngIf",t.categories&&t.serviceForm),e.xp6(2),e.Q6J("object",t.service)("photos",t.photos)("controller","services")}}const T=[{path:"",component:b},{path:"edit",component:(()=>{class i{constructor(t,n,s,m,d,A){this.serviceService=t,this.fb=n,this.route=s,this.bcService=m,this.toastr=d,this.router=A,this.serviceForm=new o.cw({}),this.photos=[],this.id=Number(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.loadCategories()}loadService(){this.serviceService.getById(this.id).subscribe({next:t=>{this.service=t,this.bcService.set("@serviceNameTitle",t.name),this.bcService.set("@serviceEditTitle","Edit "+t.name),this.initForm(this.service),this.service.servicePhotos.forEach(n=>{this.photos.push(n.photo)})}})}loadCategories(){this.serviceService.getCategories().subscribe({next:t=>{this.categories=t},complete:()=>{this.loadService()}})}onSubmit(){this.serviceService.edit(this.serviceForm.value).subscribe({next:()=>{this.toastr.success("Service updated successfully"),this.router.navigateByUrl("/account/services/list/"+this.id)},error:()=>{}})}initForm(t){this.serviceForm=this.fb.group({id:[""],name:["",[o.kI.required,o.kI.minLength(10),o.kI.maxLength(100)]],description:["",[o.kI.required,o.kI.minLength(10),o.kI.maxLength(100)]],price:["",[o.kI.required]],serviceCategory:this.fb.group({categoryId:[t.serviceCategory.categoryId,[o.kI.required]]})}),this.serviceForm.patchValue(t)}receive(t){this.service=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.r),e.Y36(o.qu),e.Y36(l.gz),e.Y36(v.pm),e.Y36(h._W),e.Y36(l.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit"]],decls:1,vars:1,consts:[["class","container-fluid container-md",4,"ngIf"],[1,"container-fluid","container-md"],[1,"mb-4"],[1,"text-decoration-none",3,"routerLink"],[1,"fa","fa-angle-left","me-2"],[1,"row"],[1,"col-12","col-sm-10","col-md-6","col-lg-4"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"col-12","col-md-6","col-lg-8"],[3,"object","photos","controller","send"],[3,"formGroup","ngSubmit"],[3,"label","formControl"],[3,"label","type","formControl"],["class","form-floating","id","floatingSelect",4,"ngIf"],[1,"col","d-flex"],["type","submit",1,"btn","btn-success","my-3",3,"disabled"],[1,"fa","fa-floppy-o","ms-2"],["id","floatingSelect",1,"form-floating"],[1,"form-select",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[3,"value"]],template:function(t,n){1&t&&e.YNc(0,S,10,5,"div",0),2&t&&e.Q6J("ngIf",n.service&&n.categories)},dependencies:[a.sg,a.O5,l.rH,y.t,o._Y,o.YN,o.Kr,o.EJ,o.JJ,o.JL,o.oH,o.sg,_.N,a.JJ]}),i})(),data:{breadcrumb:{alias:"serviceEditTitle"}}}];let F=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.Bz.forChild(T),l.Bz]}),i})();var J=c(4466);let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[a.ez,F,J.m]}),i})()}}]);