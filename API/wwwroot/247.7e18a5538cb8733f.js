"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[247],{7247:(N,l,r)=>{r.r(l),r.d(l,{AccountProductsModule:()=>T});var u=r(6895),i=r(2559),n=r(433),t=r(1571),a=r(8909),m=r(5528),p=r(5329),f=r(7185),v=r(4015),h=r(4217);function g(e,c){if(1&e&&(t.TgZ(0,"option",18),t.ALo(1,"number"),t._uU(2),t.qZA()),2&e){const o=c.$implicit;t.s9C("value",t.lcZ(1,2,o.id)),t.xp6(2),t.hij(" ",o.name," ")}}function C(e,c){if(1&e&&(t.TgZ(0,"div",13)(1,"div",14)(2,"select",15),t.YNc(3,g,3,4,"option",16),t.qZA(),t.TgZ(4,"label",17),t._uU(5,"Product type"),t.qZA()()()),2&e){const o=t.oxw(2);t.xp6(2),t.Q6J("formControl",o.productForm.controls.productItemClass.get("itemClassId")),t.xp6(1),t.Q6J("ngForOf",o.types)}}function A(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"form",1),t.NdJ("ngSubmit",function(){t.CHM(o);const d=t.oxw();return t.KtG(d.onSubmit())}),t.TgZ(1,"div",2)(2,"div",3)(3,"div",4),t._UZ(4,"app-text-input",5),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4),t._UZ(7,"app-text-area",5),t.qZA()(),t.TgZ(8,"div",3)(9,"div",4)(10,"div",3)(11,"div",6),t._UZ(12,"app-text-input",7),t.qZA(),t.TgZ(13,"div",6),t._UZ(14,"app-text-input",7),t.qZA()()()(),t.TgZ(15,"div",8),t.YNc(16,C,6,2,"div",9),t.qZA(),t.TgZ(17,"div",3)(18,"div",10)(19,"button",11),t._uU(20,"Add product "),t._UZ(21,"i",12),t.qZA()()()()()}if(2&e){const o=t.oxw();t.Q6J("formGroup",o.productForm),t.xp6(4),t.Q6J("label","Name")("formControl",o.productForm.controls.name),t.xp6(3),t.Q6J("label","Description")("formControl",o.productForm.controls.description),t.xp6(5),t.Q6J("label","Price")("type","number")("formControl",o.productForm.controls.price),t.xp6(2),t.Q6J("label","Quantity")("type","number")("formControl",o.productForm.controls.stockQuantity),t.xp6(2),t.Q6J("ngIf",o.productForm.get("productItemClass")),t.xp6(3),t.Q6J("disabled",o.productForm.invalid)}}let y=(()=>{class e{constructor(o,s,d,J,S,U){this.bcService=o,this.productService=s,this.fb=d,this.accountService=J,this.router=S,this.toastr=U,this.productForm=new n.cw({}),this.types=[],this.user={},this.bcService.set("@newProductTitle","Create a new product")}ngOnInit(){this.loadTypes()}onSubmit(){const o=this.productForm.value;this.productService.add(o).subscribe({next:()=>{this.productForm.reset(o),this.toastr.success("Product added successfully"),this.router.navigateByUrl("/account/products/list")}})}initForm(o,s){this.productForm=this.fb.group({name:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(100)]],description:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(300)]],price:["",[n.kI.required]],stockQuantity:["",[n.kI.required]],userProduct:this.fb.group({userId:[s,[n.kI.required]]}),productItemClass:this.fb.group({itemClassId:[o,[n.kI.required]]})})}loadTypes(){this.productService.getTypes().subscribe({next:o=>{this.types=o},complete:()=>{this.loadUser()}})}loadUser(){this.accountService.getUser().subscribe({next:o=>{this.user=o},complete:()=>{this.initForm(this.types[0].id,this.user.id)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.pm),t.Y36(m.M),t.Y36(n.qu),t.Y36(p.B),t.Y36(i.F0),t.Y36(f._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account-products-new"]],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"container-fluid","container-md"],[1,"row"],[1,"col-12","col-sm-10","col-md-6","col-lg-4"],[3,"label","formControl"],[1,"col-6"],[3,"label","type","formControl"],[1,"row","mb-3"],["class","col-12 col-sm col-md-6 col-lg-4",4,"ngIf"],[1,"col","d-flex"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"fa","fa-check","ms-2"],[1,"col-12","col-sm","col-md-6","col-lg-4"],["id","floatingSelect",1,"form-floating"],[1,"form-select",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[3,"value"]],template:function(o,s){1&o&&t.YNc(0,A,22,13,"form",0),2&o&&t.Q6J("ngIf",s.types&&s.productForm&&s.user)},dependencies:[u.sg,u.O5,v.t,n._Y,n.YN,n.Kr,n.EJ,n.JJ,n.JL,n.oH,n.sg,h.U,u.JJ]}),e})();var x=r(9646),P=r(435),F=r(2262);const Z=[{path:"new",component:y,data:{breadcrumb:{alias:"newProductTitle"}},canDeactivate:[(()=>{class e{constructor(o){this.confirmService=o,this.modal=new P.u,this.modal.title="New product",this.modal.message="Are you sure to lose unsaved changes for your new product?"}canDeactivate(o){return o.productForm?.touched?this.confirmService.confirm(this.modal):(0,x.of)(!0)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(F.z))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]},{path:"list",loadChildren:()=>Promise.all([r.e(592),r.e(988)]).then(r.bind(r,3988)).then(e=>e.AccountProductsListModule)}];let b=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[i.Bz.forChild(Z),i.Bz]}),e})();var I=r(4466);let T=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,b,I.m]}),e})()}}]);