"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[757],{3757:(F,u,i)=>{i.r(u),i.d(u,{ProductModule:()=>O});var a=i(6895),l=i(2559),g=i(4020),t=i(1571),d=i(5528),p=i(433),h=i(7696),v=i(9219);const f=["search"];function P(o,c){if(1&o&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&o){const e=c.$implicit,n=t.oxw(2);t.Q6J("selected",n.params.sort===e.value)("value",e.value),t.xp6(1),t.hij(" ",e.name," ")}}function x(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"li",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,I=t.oxw(2);return t.KtG(I.onTypeSelected(s.id))}),t._uU(1),t.qZA()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.ekj("active",e.id===n.params.itemClassId),t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function _(o,c){if(1&o&&(t.TgZ(0,"div",19),t._UZ(1,"app-card",20),t.qZA()),2&o){const e=c.$implicit;t.xp6(1),t.Q6J("item",e)}}function C(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",21)(1,"app-pager",22),t.NdJ("pageChanged",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onPageChanged(r))}),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("totalCount",e.totalCount)("pageSize",e.params.pageSize)("pageNumber",e.params.pageNumber)}}function y(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"h5",4),t._uU(3,"Sort"),t.qZA(),t.TgZ(4,"select",5),t.NdJ("change",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onSortSelected(r))}),t.YNc(5,P,2,3,"option",6),t.qZA(),t.TgZ(6,"h5",4),t._uU(7,"Types"),t.qZA(),t.TgZ(8,"ul",7),t.YNc(9,x,2,4,"li",8),t.qZA()(),t.TgZ(10,"div",9)(11,"div",10)(12,"input",11,12),t.NdJ("keyup.enter",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSearch())}),t.qZA(),t.TgZ(14,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onSearch())}),t._uU(15,"Search"),t.qZA(),t.TgZ(16,"button",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onReset())}),t._uU(17,"Reset"),t.qZA()(),t.TgZ(18,"div",2),t.YNc(19,_,2,1,"div",15),t.qZA(),t.YNc(20,C,2,3,"div",16),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.sortOptions),t.xp6(4),t.Q6J("ngForOf",e.types),t.xp6(10),t.Q6J("ngForOf",e.products),t.xp6(1),t.Q6J("ngIf",e.totalCount>0)}}let T=(()=>{class o{constructor(e){this.productService=e,this.products=[],this.totalCount=0,this.types=[],this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Price: Low to high",value:"priceAsc"},{name:"Price: High to low",value:"priceDesc"}],this.productService.resetParams(),this.params=e.getParams()}ngOnInit(){this.loadProducts(),this.loadTypes()}loadTypes(){this.productService.getTypes().subscribe({next:e=>{this.types=e}})}loadProducts(){this.productService.getAll().subscribe({next:e=>{this.products=e.data,this.totalCount=e.count},error:e=>console.log(e)})}onPageChanged(e){const n=this.productService.getParams();n.pageNumber!==e&&(n.pageNumber=e,this.productService.setParams(n),this.params=n,this.loadProducts())}onSortSelected(e){const n=this.productService.getParams();n.sort=e.target.value,this.productService.setParams(n),this.params=n,this.loadProducts()}onTypeSelected(e){const n=this.productService.getParams();n.itemClassId=e,n.pageNumber=1,this.productService.setParams(n),this.params=n,this.loadProducts()}onSearch(){const e=this.productService.getParams();e.search=this.searchTerm?.nativeElement.value,e.pageNumber=1,this.productService.setParams(e),this.params=e,this.loadProducts()}onReset(){this.searchTerm&&(this.searchTerm.nativeElement.value=""),this.params=new g.L,this.productService.setParams(this.params),this.loadProducts()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.M))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product"]],viewQuery:function(e,n){if(1&e&&t.Gf(f,5),2&e){let r;t.iGM(r=t.CRH())&&(n.searchTerm=r.first)}},decls:2,vars:1,consts:[[1,"container-fluid","container-xxl"],["class","row",4,"ngIf"],[1,"row"],[1,"col-12","col-sm-4","col-md-3","col-lg-2"],[1,"text-info","ms-3"],[1,"form-select","mb-4",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"list-group","my-3","rounded-3","shadow-sm"],["class","list-group-item pointer",3,"active","value","click",4,"ngFor","ngForOf"],[1,"col-12","col-sm-8","col-md-9","col-lg-10"],[1,"d-flex","mt-2","mb-3"],["type","text","placeholder","Search",1,"form-control","me-2","bg-transparent",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-2",3,"click"],[1,"btn","btn-outline-success",3,"click"],["class","col-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"selected","value"],[1,"list-group-item","pointer",3,"value","click"],[1,"col-6","col-md-4","col-lg-3"],[3,"item"],[1,"d-flex","justify-content-center"],[3,"totalCount","pageSize","pageNumber","pageChanged"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,y,21,4,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.types))},dependencies:[a.sg,a.O5,p.YN,p.Kr,h.P,v.A]}),o})();var m=i(9105),S=i(8909),Z=i(1584),b=i(3968);function A(o,c){if(1&o&&(t.TgZ(0,"div",7),t._UZ(1,"ngx-gallery",8),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("options",e.galleryOptions)("images",e.galleryImages)}}function w(o,c){if(1&o&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.YNc(3,A,2,2,"div",4),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"app-detail",6),t.qZA()()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.showGallery()),t.xp6(2),t.Q6J("item",e.product)}}const N=[{path:"",component:T},{path:":id",component:(()=>{class o{constructor(e,n,r,s){this.route=e,this.productService=n,this.bcService=r,this.userService=s,this.galleryOptions=[],this.galleryImages=[],this.id=Number(this.route.snapshot.paramMap.get("id")),this.galleryOptions=[{imagePercent:100,thumbnailsColumns:4,imageAnimation:m.zw.Slide,preview:!0,imageSwipe:!0,thumbnailsSwipe:!0,previewCloseOnClick:!0,previewCloseOnEsc:!0,thumbnailMargin:0,thumbnailsMargin:0,previewKeyboardNavigation:!0,imageAutoPlay:!0,imageAutoPlayInterval:5e3}]}ngOnInit(){this.loadProduct()}loadProduct(){this.productService.getProduct(this.id).subscribe({next:e=>{this.product=e,this.bcService.set("@productDetails",e.name),this.galleryImages=this.defineGalleryImages()}})}defineGalleryImages(){if(!this.product)return[];if(0===this.product.productPhotos.length)return[];const e=[],n=[];this.product.productPhotos.forEach(r=>{n.push(r.photo)});for(const r of n)e.push({small:r.url,medium:r.url,big:r.url});return e}showGallery(){return this.galleryImages.length>0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.gz),t.Y36(d.M),t.Y36(S.pm),t.Y36(Z.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-detail"]],decls:1,vars:1,consts:[["class","container-fluid container-xxl",4,"ngIf"],[1,"container-fluid","container-xxl"],[1,"row"],[1,"col-12","col-sm-6","col-lg-5","mb-3"],["class","gallery-viewer",4,"ngIf"],[1,"col-12","col-sm-6","col-lg-7","mb-3"],[3,"item"],[1,"gallery-viewer"],[1,"ngx-gallery","rounded-4","shadow-info","overflow-hidden",3,"options","images"]],template:function(e,n){1&e&&t.YNc(0,w,6,2,"div",0),2&e&&t.Q6J("ngIf",n.product)},dependencies:[a.O5,m.g$,b.J],styles:[".card[_ngcontent-%COMP%]{background-color:#0ff}.card[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{padding-bottom:20px}"]}),o})(),data:{breadcrumb:{alias:"productDetails"}}}];let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(N),l.Bz]}),o})();var M=i(4466);let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,J,M.m]}),o})()}}]);