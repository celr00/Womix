"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[427],{9427:(M,h,r)=>{r.r(h),r.d(h,{ItemModule:()=>N});var m=r(6895),a=r(2559),j=r(9646),d=r(435),t=r(1571),u=r(2262);let x=(()=>{class o{constructor(e){this.confirmService=e,this.modal=new d.u,this.modal.title="Job edit",this.modal.message="Are you sure to lose changes made to this job?"}canDeactivate(e){return e.jobForm?.dirty?this.confirmService.confirm(this.modal):(0,j.of)(!0)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(u.z))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var n=r(433),p=r(7573),v=r(8909),g=r(7185),I=r(4015),C=r(4217);function J(o,i){if(1&o&&(t.TgZ(0,"option",19),t.ALo(1,"number"),t._uU(2),t.qZA()),2&o){const e=i.$implicit;t.s9C("value",t.lcZ(1,2,e.id)),t.xp6(2),t.hij(" ",e.name," ")}}function y(o,i){if(1&o&&(t.TgZ(0,"div",15)(1,"select",16),t.YNc(2,J,3,4,"option",17),t.qZA(),t.TgZ(3,"label",18),t._uU(4,"Job area"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("formControl",e.jobForm.controls.jobArea.get("areaId")),t.xp6(1),t.Q6J("ngForOf",e.areas)}}function F(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onSubmit())}),t._UZ(1,"app-text-input",9)(2,"app-text-area",9)(3,"app-text-input",10),t.YNc(4,y,5,2,"div",11),t.TgZ(5,"div",5)(6,"div",12)(7,"button",13),t._uU(8,"Confirm changes "),t._UZ(9,"i",14),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.Q6J("formGroup",e.jobForm),t.xp6(1),t.Q6J("label","Name")("formControl",e.jobForm.controls.name),t.xp6(1),t.Q6J("label","Description")("formControl",e.jobForm.controls.description),t.xp6(1),t.Q6J("label","Salary")("type","number")("formControl",e.jobForm.controls.salary),t.xp6(1),t.Q6J("ngIf",e.jobForm.get("jobArea")),t.xp6(3),t.Q6J("disabled",e.jobForm.invalid||!e.jobForm.dirty)}}function Z(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"div",2)(2,"a",3),t._UZ(3,"i",4),t._uU(4," Back "),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6),t.YNc(7,F,10,10,"form",7),t.qZA()()()),2&o){const e=t.oxw();t.xp6(2),t.MGl("routerLink","/account/jobs/list/",e.job.id,""),t.xp6(5),t.Q6J("ngIf",e.areas&&e.jobForm)}}let S=(()=>{class o{unloadNotification(e){this.jobForm?.dirty&&(e.returnValue=!0)}constructor(e,s,c,l,f,b,Q){this.jobService=e,this.fb=s,this.route=c,this.bcService=l,this.toastr=f,this.router=b,this.confirmService=Q,this.jobForm=new n.cw({}),this.job={},this.photos=[],this.modal=new d.u,this.id=Number(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.loadAreas()}loadJob(){this.jobService.getById(this.id).subscribe({next:e=>{this.job=e,this.bcService.set("@jobItemComponentBreadcrumbTitle",e.name),this.bcService.set("@jobEditItemBreadCrumbTitle","Edit "+e.name),this.initForm(this.job),this.modal.title=`Job ${this.job.name}`,this.modal.message=`Do you confirm changes made to the job '${this.job.name}'?`}})}loadAreas(){this.jobService.getAreas().subscribe({next:e=>{this.areas=e},complete:()=>{this.loadJob()}})}onSubmit(){this.modal.title=`Save changes for ${this.job.name}`,this.modal.message=`Do you want to confirm changes made to your job ${this.job.name}`;const e=this.jobForm.value;this.confirmService.confirm(this.modal).subscribe({next:s=>{s&&this.jobService.edit(e).subscribe({next:()=>{this.jobForm.reset(e),this.toastr.success("Job updated successfully"),this.router.navigateByUrl("/account/jobs/list/"+this.id)}})}})}initForm(e){this.jobForm=this.fb.group({id:[""],name:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(100)]],description:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(300)]],salary:["",[n.kI.required]],jobArea:this.fb.group({areaId:[e.jobArea.areaId,[n.kI.required]]})}),this.jobForm.patchValue(e)}receive(e){this.job=e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.e),t.Y36(n.qu),t.Y36(a.gz),t.Y36(v.pm),t.Y36(g._W),t.Y36(a.F0),t.Y36(u.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit"]],hostBindings:function(e,s){1&e&&t.NdJ("beforeunload",function(l){return s.unloadNotification(l)},!1,t.Jf7)},decls:1,vars:1,consts:[["class","container-fluid container-md",4,"ngIf"],[1,"container-fluid","container-md"],[1,"mb-4"],[1,"text-decoration-none",3,"routerLink"],[1,"fa","fa-angle-left","me-2"],[1,"row"],[1,"col-12","col-sm-10","col-md-6","col-lg-4"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"label","formControl"],[3,"label","type","formControl"],["class","form-floating","id","floatingSelect",4,"ngIf"],[1,"col","d-flex"],["type","submit",1,"btn","btn-success","my-3",3,"disabled"],[1,"fa","fa-floppy-o","ms-2"],["id","floatingSelect",1,"form-floating"],[1,"form-select",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[3,"value"]],template:function(e,s){1&e&&t.YNc(0,Z,8,2,"div",0),2&e&&t.Q6J("ngIf",s.job&&s.areas)},dependencies:[m.sg,m.O5,a.rH,I.t,n._Y,n.YN,n.Kr,n.EJ,n.JJ,n.JL,n.oH,n.sg,C.U,m.JJ]}),o})();var T=r(1106),A=r(3968);function U(o,i){if(1&o&&(t.TgZ(0,"div",17),t._UZ(1,"app-user-card",18),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("user",e.user)("compact",!0)}}function Y(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7," Back "),t.qZA()(),t._UZ(8,"app-detail",7),t.TgZ(9,"div",8)(10,"div",9)(11,"a",10),t._UZ(12,"i",11),t._uU(13," Edit"),t.qZA(),t.TgZ(14,"button",12),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.delete())}),t._UZ(15,"i",13),t._uU(16," Delete"),t.qZA()()()(),t.TgZ(17,"div",14)(18,"h4",15),t._uU(19," Interested users "),t.qZA(),t.YNc(20,U,2,2,"div",16),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("item",e.job)("fromAccount",!0)("type","job"),t.xp6(12),t.Q6J("ngForOf",e.job.userJobInterests)}}const _=[{path:"",component:(()=>{class o{constructor(e,s,c,l,f,b){this.route=e,this.bcService=s,this.jobService=c,this.router=l,this.toastr=f,this.confirmService=b,this.job={},this.modal=new d.u,this.id=Number(this.route.snapshot.paramMap.get("id"))}ngOnInit(){this.loadJob()}loadJob(){this.jobService.getById(this.id).subscribe({next:e=>{this.job=e,this.bcService.set("@jobItemComponentBreadcrumbTitle",e.name)}})}delete(){this.modal.title=`Delete ${this.job.name}`,this.modal.message=`Are you sure to delete the job '${this.job.name}'?`,this.modal.btnOkText="Delete",this.confirmService.confirm(this.modal).subscribe({next:e=>{e&&this.jobService.delete(this.id).subscribe({next:()=>{this.router.navigateByUrl("/account/jobs/list"),this.toastr.success("Job deleted successfully")}})}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.gz),t.Y36(v.pm),t.Y36(p.e),t.Y36(a.F0),t.Y36(g._W),t.Y36(u.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-item"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container-fluid","container-md"],[1,"row","mb-3"],[1,"col-12","col-lg-6","col-xl-7","mb-3"],[1,"mb-4"],["routerLink","/account/jobs/list",1,"text-decoration-none"],[1,"fa","fa-angle-left","me-2"],[3,"item","fromAccount","type"],[1,"row","my-4"],[1,"col","d-flex","justify-content-end"],["routerLink","edit",1,"btn","btn-outline-info","me-2"],[1,"fa","fa-pencil","me-2"],[1,"btn","btn-outline-danger","me-2",3,"click"],[1,"fa","fa-trash","me-2"],[1,"col-12","col-lg-6","col-xl-5"],[1,"text-muted","fw-semibold"],["class","",4,"ngFor","ngForOf"],[1,""],[3,"user","compact"]],template:function(e,s){1&e&&t.YNc(0,Y,21,4,"div",0),2&e&&t.Q6J("ngIf",s.job)},dependencies:[m.sg,m.O5,a.rH,T.r,A.J]}),o})()},{path:"edit",component:S,data:{breadcrumb:{alias:"jobEditItemBreadCrumbTitle"}},canDeactivate:[x]}];let E=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.Bz.forChild(_),a.Bz]}),o})();var B=r(4466);let N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,E,B.m]}),o})()}}]);