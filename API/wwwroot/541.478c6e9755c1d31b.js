"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[541],{8541:(B,d,n)=>{n.r(d),n.d(d,{JobsModule:()=>U});var a=n(6895),l=n(2559),r=n(433),o=n(1571),f=n(8909),u=n(7573),b=n(5329),v=n(7185),p=n(4015),h=n(4217);function g(e,s){if(1&e&&(o.TgZ(0,"option",17),o.ALo(1,"number"),o._uU(2),o.qZA()),2&e){const t=s.$implicit;o.s9C("value",o.lcZ(1,2,t.id)),o.xp6(2),o.hij(" ",t.name," ")}}function J(e,s){if(1&e&&(o.TgZ(0,"div",12)(1,"div",13)(2,"select",14),o.YNc(3,g,3,4,"option",15),o.qZA(),o.TgZ(4,"label",16),o._uU(5,"Job area"),o.qZA()()()),2&e){const t=o.oxw(2);o.xp6(2),o.Q6J("formControl",t.jobForm.controls.jobArea.get("areaId")),o.xp6(1),o.Q6J("ngForOf",t.areas)}}function j(e,s){if(1&e){const t=o.EpF();o.TgZ(0,"form",1),o.NdJ("ngSubmit",function(){o.CHM(t);const c=o.oxw();return o.KtG(c.onSubmit())}),o.TgZ(1,"div",2)(2,"div",3)(3,"div",4),o._UZ(4,"app-text-input",5),o.qZA()(),o.TgZ(5,"div",3)(6,"div",4),o._UZ(7,"app-text-area",5),o.qZA()(),o.TgZ(8,"div",3)(9,"div",4),o._UZ(10,"app-text-input",6),o.qZA()(),o.TgZ(11,"div",7),o.YNc(12,J,6,2,"div",8),o.qZA(),o.TgZ(13,"div",3)(14,"div",9)(15,"button",10),o._uU(16,"Add job "),o._UZ(17,"i",11),o.qZA()()()()()}if(2&e){const t=o.oxw();o.Q6J("formGroup",t.jobForm),o.xp6(4),o.Q6J("label","Name")("formControl",t.jobForm.controls.name),o.xp6(3),o.Q6J("label","Description")("formControl",t.jobForm.controls.description),o.xp6(3),o.Q6J("label","Salary")("type","number")("formControl",t.jobForm.controls.salary),o.xp6(2),o.Q6J("ngIf",t.jobForm.get("jobArea")),o.xp6(3),o.Q6J("disabled",t.jobForm.invalid)}}let C=(()=>{class e{unloadNotification(t){this.jobForm?.dirty&&(t.returnValue=!0)}constructor(t,i,c,m,w,Y){this.bcService=t,this.jobService=i,this.fb=c,this.accountService=m,this.router=w,this.toastr=Y,this.jobForm=new r.cw({}),this.areas=[],this.user={},this.bcService.set("@newJobBreadcrumbTitle","Create a new job")}ngOnInit(){this.loadAreas()}onSubmit(){const t=this.jobForm.value;this.jobService.add(t).subscribe({next:()=>{this.jobForm.reset(t),this.toastr.success("Jobs added successfully"),this.router.navigateByUrl("/account/jobs/list")}})}initForm(t,i){this.jobForm=this.fb.group({name:["",[r.kI.required,r.kI.minLength(10),r.kI.maxLength(100)]],description:["",[r.kI.required,r.kI.minLength(10),r.kI.maxLength(300)]],salary:["",[r.kI.required]],userJob:this.fb.group({userId:[i,[r.kI.required]]}),jobArea:this.fb.group({areaId:[t,[r.kI.required]]})})}loadAreas(){this.jobService.getAreas().subscribe({next:t=>{this.areas=t},complete:()=>{this.loadUser()}})}loadUser(){this.accountService.getUser().subscribe({next:t=>{this.user=t},complete:()=>{this.initForm(this.areas[0].id,this.user.id)}})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(f.pm),o.Y36(u.e),o.Y36(r.qu),o.Y36(b.B),o.Y36(l.F0),o.Y36(v._W))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-new"]],hostBindings:function(t,i){1&t&&o.NdJ("beforeunload",function(m){return i.unloadNotification(m)},!1,o.Jf7)},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"container-fluid","container-md"],[1,"row"],[1,"col-12","col-sm-10","col-md-6","col-lg-4"],[3,"label","formControl"],[3,"label","type","formControl"],[1,"row","mb-3"],["class","col-12 col-sm col-md-6 col-lg-4",4,"ngIf"],[1,"col","d-flex"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"fa","fa-check","ms-2"],[1,"col-12","col-sm","col-md-6","col-lg-4"],["id","floatingSelect",1,"form-floating"],[1,"form-select",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","floatingSelect"],[3,"value"]],template:function(t,i){1&t&&o.YNc(0,j,18,10,"form",0),2&t&&o.Q6J("ngIf",i.areas&&i.jobForm&&i.user)},dependencies:[a.sg,a.O5,p.t,r._Y,r.YN,r.Kr,r.EJ,r.JJ,r.JL,r.oH,r.sg,h.U,a.JJ]}),e})();var x=n(9646),F=n(435),S=n(2262);let Z=(()=>{class e{constructor(t){this.confirmService=t,this.modal=new F.u,this.modal.title="New job",this.modal.message="Are you sure to lose unsaved changes for your new job?"}canDeactivate(t){return t.jobForm?.touched?this.confirmService.confirm(this.modal):(0,x.of)(!0)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(S.z))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=n(6304);function A(e,s){if(1&e&&(o.TgZ(0,"div",2),o._UZ(1,"app-job-info",3),o.qZA()),2&e){const t=s.$implicit,i=o.oxw();o.xp6(1),o.Q6J("job",t.job)("myJobs",i.userJobs)}}const N=[{path:"new",component:C,data:{breadcrumb:{alias:"newJobBreadcrumbTitle"}},canDeactivate:[Z]},{path:"list",loadChildren:()=>Promise.all([n.e(592),n.e(642)]).then(n.bind(n,8642)).then(e=>e.ListModule)},{path:"saved",component:(()=>{class e{constructor(t){this.jobService=t,this.userJobs=[]}ngOnInit(){this.loadJobs()}loadJobs(){this.jobService.getInterestedJobsList().subscribe({next:t=>this.userJobs=t})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(u.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-saved"]],decls:2,vars:1,consts:[[1,"row"],["class","col-6 col-md-4",4,"ngFor","ngForOf"],[1,"col-6","col-md-4"],[3,"job","myJobs"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.YNc(1,A,2,2,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngForOf",i.userJobs))},dependencies:[a.sg,y.t]}),e})(),data:{breadCrumb:{alias:"savedJobsBreadcrumbTitle"}}}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[l.Bz.forChild(N),l.Bz]}),e})();var I=n(4466);let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[a.ez,T,I.m]}),e})()}}]);